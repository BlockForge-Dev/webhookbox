{
  "db_name": "PostgreSQL",
  "query": "\n        WITH candidate AS (\n          SELECT id\n          FROM jobs\n          WHERE\n            (\n              status = 'queued'::job_status\n              AND run_at <= now()\n            )\n            OR\n            (\n              status = 'running'::job_status\n              AND lock_expires_at IS NOT NULL\n              AND lock_expires_at < now()\n            )\n          ORDER BY run_at ASC\n          LIMIT 1\n          FOR UPDATE SKIP LOCKED\n        )\n        UPDATE jobs\n        SET\n          status = 'running'::job_status,\n          locked_by = $1,\n          locked_at = now(),\n          lock_expires_at = now() + make_interval(secs => $2),\n          attempt = attempt + 1\n        WHERE id IN (SELECT id FROM candidate)\n        RETURNING id, job_type, payload_json, attempt\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Uuid"
      },
      {
        "ordinal": 1,
        "name": "job_type",
        "type_info": "Text"
      },
      {
        "ordinal": 2,
        "name": "payload_json",
        "type_info": "Jsonb"
      },
      {
        "ordinal": 3,
        "name": "attempt",
        "type_info": "Int4"
      }
    ],
    "parameters": {
      "Left": [
        "Text",
        "Float8"
      ]
    },
    "nullable": [
      false,
      false,
      false,
      false
    ]
  },
  "hash": "39b913aeb5f0200fd6c318468c49f3f5ff9e9a640f7b2f7efbad0c9490465bb1"
}
